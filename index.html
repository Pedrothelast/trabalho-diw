<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
</head>

<body>
  <header class="cabecalho">
    <nav class="navbar navbar-expand-lg col-12 ">
      <div class="container-fluid ">
        <div class="col-02 col-sm-01">
          <a class="navbar-brand" href="index.html"><img src="img/logo.png" class="logo" alt=""></a>
        </div>
        <div class="col-06 item-m">
          <p>Wellcome Guest</p>
          <form class="d-flex" role="search">
            <input id="search-input" class="form-control me-2" type="search" placeholder="Search" aria-label="Search">

            <button id="search-button" class="btn btn-success" type="submit" style="width: auto;">Search</button>
          </form>
        </div>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse  item-m2" id="navbarSupportedContent">

          <ul class="navbar-nav me-auto mb-2 mb-lg-0" style="margin-left: 30%;">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Sing in |</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link |</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Register |</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Track order</a>
            </li>

          </ul>
          <div class="col-12" style="display: flex; flex-direction: row; justify-content: center;">
            <div class="col-06 item-m3">
              <span>Cash on Delivery | 30 Day Return</span><br>
              <span>24/7 Custume Service 1800 00 11 22</span>
            </div>
            <div class="col-04"><button type="button" class="btn btn-primary position-relative" style="margin-left: 3px;">
              Inbox
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                99+
                <span class="visually-hidden">unread messages</span>
              </span>
            </button></div>
            
          </div>
        </div>
      </div>
      </div>
    </nav>
  </header>

  <main class="principal">
    <form action="pagina_pesquisa.html" class="filtro">
      <h6>Quick Find - Choose product</h6>
      <p>Find the right product by category</p>
    
      <label for="category"></label>
      <select class="lab" name="category" id="category">
        <!-- As opções serão preenchidas dinamicamente com as categorias da API -->
      </select>
      <br>
      <button class="btn btn-danger">Search</button>
    </form>

    <div class="carol">
      <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="true">
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="img/slide2.png" class="d-block w-100" alt="...">
          </div>
          <div class="carousel-item">
            <img src="img/slide3.png" class="d-block w-100" alt="...">
          </div>
          <div class="carousel-item">
            <img src="img/slide3 (1).png" class="d-block w-100" alt="...">
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </main>

  <section class="cards" id="main-tela" style="margin: 10px;">
    
    
  </section>




  <footer class="col-12 rodape" style="width: 100%; ">
    <section class=" foot-conf">

      <div class="pay">
        <h2>Payment methods</h2>
        <div class="col-12" style="display: flex; flex-direction: row;">
          <div class="col-06" ><img src="img/mastercard.png" alt=""></div>
          <div class="col-06" style="margin: auto;"><img src="img/visa.png" alt=""></div>
        </div>
        <div class="col-12" style="display: flex; flex-direction: row;">
          <div class="col-12" style="margin: auto;"><img src="img/pg1.png" alt=""></i></div>
        </div>
        
      </div>
      <div class="quick">
        <h2>Quick Links</h2>
        <a href="">Help</a>
        <a href="">Shiping policy</a>
        <a href="">Cancels & Returns</a>
        <a href="">FAQ</a>
        <a href="">Privacy policy</a>
        <a href="">Disclaymer</a>
      </div>
      <div class="social">
        <h2>Let's be social</h2>
        <div style="display: flex; flex-direction: row;">
          <div  style="margin: auto;"><i class="bi bi-facebook"></i></div>
          <div style="margin: auto;"><i class="bi bi-whatsapp"></i></div>
          <div  style="margin: auto;"><i class="bi bi-twitter"></i></div>
        </div>

      </div>
      <div class="contact">
        <h2>Contact us</h2>
        <span>Pedro Henrique Macena Rocha</span>
        <span>Analise</span>
        <span>e Desenvolvimento de Sistema</span>
        <span>N°:800045</span>
      </div>
    </section>
    <div class="col-12 copi">2023 © redking.com </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
    integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
    crossorigin="anonymous"></script>
    
    <script>
      window.addEventListener('load', function() {
        console.log("Loading");
        load();
      });
    
      function load() {
  var xhr = new XMLHttpRequest();
  xhr.open('GET', 'https://diwserver.vps.webdock.cloud/products', true);

  xhr.onload = function() {
    if (xhr.status >= 200 && xhr.status < 400) {
      var data = JSON.parse(xhr.responseText);
      var produtos = data.products;
      var telaElement = document.getElementById('main-tela');
      var strHtml = '';

      if (produtos.length >= 10) {
        for (var i = 0; i < 10; i++) {
          var ratingHTML = '';
          var rate = produtos[i].rating.rate;

          for (var j = 1; j <= 5; j++) {
            if (j <= rate) {
              ratingHTML += '<i class="bi bi-star-fill"></i>';
            } else {
              ratingHTML += '<i class="bi bi-star"></i>';
            }
          }

          strHtml += `
            <div class="item" onclick="showProductDetails(${produtos[i].id})"> 
              <div>
                <img class="img-card" src="${produtos[i].image}" alt="">
                <div>
                  <p class="title-card">${produtos[i].title}</p>
                  <p class="product-rating">${ratingHTML}</p>
                  <span>R$: ${produtos[i].price.toFixed(2)}</span>
                </div>
              </div>
            </div>`;
        }
      } else {
        console.log('Número insuficiente de elementos');
      }

      telaElement.innerHTML = strHtml;
    }
  };

  xhr.onerror = function() {
    console.log('Erro na requisição');
  };

  xhr.send();
}

function showProductDetails(productId) {
  // Redirecionar o usuário para a página de detalhes do produto
  console.log("Product")
  window.location.href = 'pagina_detalhes.html?id=' + productId;
}

    </script>




   <script>
   window.addEventListener('load', function() {
  setupSearch();
});

  function setupSearch() {
  var searchButton = document.getElementById('search-button');
  searchButton.addEventListener('click', performSearch);
}

function performSearch(event) {
  event.preventDefault(); // Evita o comportamento padrão do formulário

  var searchInput = document.getElementById('search-input');
  var query = searchInput.value.trim(); // Remove espaços em branco no início e no fim
  var encodedQuery = encodeURIComponent(query);

  // Redirecionar o usuário para a página de pesquisa com o termo de busca na URL
  window.location.href = 'pagina_pesquisa.html?query=' + encodedQuery;
}
  </script>



  <script>
    // Função para carregar as categorias da API e preencher as opções do menu suspenso
    function loadCategories() {
  var xhr = new XMLHttpRequest();
  xhr.open('GET', 'https://diwserver.vps.webdock.cloud/products/categories', true);

  xhr.onload = function() {
    if (xhr.status >= 200 && xhr.status < 400) {
      var categories = JSON.parse(xhr.responseText);

      var categorySelect = document.getElementById('category');

      // Limpar opções existentes
      categorySelect.innerHTML = '';

      // Adicionar as opções das categorias
      categories.forEach(function(category) {
        var option = document.createElement('option');
        option.value = category;
        option.textContent = category;
        categorySelect.appendChild(option);
      });
    }
  };

  xhr.onerror = function() {
    console.log('Erro na requisição');
  };

  xhr.send();
}

// Carregar as categorias ao carregar a página
loadCategories();

// Redirecionar para a página "pagina_pesquisa" com a categoria selecionada no formulário
var form = document.querySelector('.filtro');
form.addEventListener('submit', function(event) {
  event.preventDefault(); // Impede o envio do formulário

  var selectedCategory = document.getElementById('category').value;
  var url = 'pagina_pesquisa.html?category=' + encodeURIComponent(selectedCategory);

  window.location.href = url;
});

  </script>
    
</body>

</html>