<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Detalhes do Produto</title>
  <!-- Estilos CSS -->
  <style>
    .product-details {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      margin-top: 50px;
    }
    
    /* .product-details img {
      width: 200px;
      height: auto;
      margin-bottom: 20px;
    } */
    
    .product-details p {
      margin-bottom: 10px;
    }
  </style>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
  <script src="app.js"></script>
</head>
<body>
  <header class="cabecalho">
    <header class="cabecalho">
        <nav class="navbar navbar-expand-lg col-12 ">
          <div class="container-fluid ">
            <div class="col-02 col-sm-01">
              <a class="navbar-brand" href="index.html"><img src="img/logo.png" class="logo" alt=""></a>
            </div>
            <div class="col-06 item-m">
              <p>Wellcome Guest</p>
              <form class="d-flex" role="search">
                <input id="search-input" class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
    
                <button id="search-button" class="btn btn-success" type="submit" style="width: auto;" onclick="setupSearch()">Search</button>
              </form>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse  item-m2" id="navbarSupportedContent">
    
              <ul class="navbar-nav me-auto mb-2 mb-lg-0" style="margin-left: 30%;">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="#">Sing in |</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Link |</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Register |</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Track order</a>
                </li>
    
              </ul>
              <div class="col-12" style="display: flex; flex-direction: row; justify-content: center;">
                <div class="col-06 item-m3">
                  <span>Cash on Delivery | 30 Day Return</span><br>
                  <span>24/7 Custume Service 1800 00 11 22</span>
                </div>
                <div class="col-04"><button type="button" class="btn btn-primary position-relative" style="margin-left: 3px;">
                  Inbox
                  <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                    99+
                    <span class="visually-hidden">unread messages</span>
                  </span>
                </button></div>
                
              </div>
            </div>
          </div>
          </div>
        </nav>
      </header>
  </header>
<section style="padding: 20px;">
  <!-- Container para exibir os detalhes do produto -->
  <div id="product-details">
    
  </div>
</section>
  <footer class="col-12 rodape" style="width: 100%; ">
    <section class=" foot-conf">

      <div class="pay">
        <h2>Payment methods</h2>
        <div class="col-12" style="display: flex; flex-direction: row;">
          <div class="col-06" ><img src="img/mastercard.png" alt=""></div>
          <div class="col-06" style="margin: auto;"><img src="img/visa.png" alt=""></div>
        </div>
        <div class="col-12" style="display: flex; flex-direction: row;">
          <div class="col-12" style="margin: auto;"><img src="img/pg1.png" alt=""></i></div>
        </div>
        
      </div>
      <div class="quick">
        <h2>Quick Links</h2>
        <a href="">Help</a>
        <a href="">Shiping policy</a>
        <a href="">Cancels & Returns</a>
        <a href="">FAQ</a>
        <a href="">Privacy policy</a>
        <a href="">Disclaymer</a>
      </div>
      <div class="social">
        <h2>Let's be social</h2>
        <div style="display: flex; flex-direction: row;">
          <div  style="margin: auto;"><i class="bi bi-facebook"></i></div>
          <div style="margin: auto;"><i class="bi bi-whatsapp"></i></div>
          <div  style="margin: auto;"><i class="bi bi-twitter"></i></div>
        </div>

      </div>
      <div class="contact">
        <h2>Contact us</h2>
        <span>Pedro Henrique Macena Rocha</span>
        <span>Analise</span>
        <span>e Desenvolvimento de Sistema</span>
        <span>N°:800045</span>
      </div>
    </section>
    <div class="col-12 copi">2023 © redking.com </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
    integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
    crossorigin="anonymous"></script>
    <script>
      window.addEventListener('load', function() {
     setupSearch1();
   });
   
     function setupSearch1() {
     var searchButton = document.getElementById('search-button');
     searchButton.addEventListener('click', performSearch1);
   }
   
   function performSearch1(event) {
     event.preventDefault(); // Evita o comportamento padrão do formulário
   
     var searchInput = document.getElementById('search-input');
     var query = searchInput.value.trim(); // Remove espaços em branco no início e no fim
     var encodedQuery = encodeURIComponent(query);
   
     // Redirecionar o usuário para a página de pesquisa com o termo de busca na URL
     window.location.href = 'pagina_pesquisa.html?query=' + encodedQuery;
   }
     </script>
   <script>
      window.addEventListener('DOMContentLoaded', function() {
        loadProductDetails();
      });
  
      function getProductIdFromUrl() {
        var urlParams = new URLSearchParams(window.location.search);
        return urlParams.get('id');
      }
  
      function loadProductDetails() {
        var productId = getProductIdFromUrl();
  
        if (productId) {
          var xhr = new XMLHttpRequest();
          console.log(productId);
          xhr.open('GET', 'https://diwserver.vps.webdock.cloud/products/' + productId, true);
  
          xhr.onload = function() {
            if (xhr.status >= 200 && xhr.status < 400) {
              var productData = JSON.parse(xhr.responseText);
              displayProductDetails(productData);
            }
          };
  
          xhr.onerror = function() {
            console.log('Erro na requisição');
          };
  
          xhr.send();
        } else {
          console.log('ID do produto não encontrado na URL');
        }
      }
  
      function displayProductDetails(product) {
        var productDetailsElement = document.getElementById('product-details');
  
        var ratingHTML = '';
        var rate = product.rating.rate;
  
        for (var i = 1; i <= 5; i++) {
          if (i <= rate) {
            ratingHTML += '<i class="bi bi-star-fill"></i>';
          } else {
            ratingHTML += '<i class="bi bi-star"></i>';
          }
        }
  
        var strHtml = `
        <div class="item">
          <h1>${product.title}</h1>
          <img class="img-card" src="${product.image}" alt="Imagem do produto">
          <p>Preço: R$ ${product.price.toFixed(2)}</p>
          <p class="title-card">Descrição: ${product.description}</p>
          <p>Categoria: ${product.category}</p>
          <p>Avaliação: ${ratingHTML} (${product.rating.count} avaliações)
            </div>`;
  
        productDetailsElement.innerHTML = strHtml;
      }
    </script>
    </body>
</html>
